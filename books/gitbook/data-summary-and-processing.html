<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Data Summary and Processing | HarvardX - PH125.9x Data Science: Capstone - Movie Lens</title>
  <meta name="description" content="HarvardX - PH125.9x Data Science Capstone" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Data Summary and Processing | HarvardX - PH125.9x Data Science: Capstone - Movie Lens" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="HarvardX - PH125.9x Data Science Capstone" />
  <meta name="github-repo" content="Emmanuel_R8/HarvardX-Movielens" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Data Summary and Processing | HarvardX - PH125.9x Data Science: Capstone - Movie Lens" />
  
  <meta name="twitter:description" content="HarvardX - PH125.9x Data Science Capstone" />
  

<meta name="author" content="Emmanuel Rialland - https://github.com/Emmanuel_R8" />


<meta name="date" content="2019-11-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="visualisation.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./introduction.html" target="blank>HarvardX - PH125.9x Data Science: Capstone - Movie Lens</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-summary-and-processing.html"><a href="data-summary-and-processing.html"><i class="fa fa-check"></i><b>2</b> Data Summary and Processing</a><ul>
<li class="chapter" data-level="2.1" data-path="data-summary-and-processing.html"><a href="data-summary-and-processing.html#description-of-the-dataset"><i class="fa fa-check"></i><b>2.1</b> Description of the dataset</a></li>
<li class="chapter" data-level="2.2" data-path="data-summary-and-processing.html"><a href="data-summary-and-processing.html#description-of-the-variables."><i class="fa fa-check"></i><b>2.2</b> Description of the variables.</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-summary-and-processing.html"><a href="data-summary-and-processing.html#intuitive-description-of-the-pre-processing-requirements"><i class="fa fa-check"></i><b>2.2.1</b> Intuitive description of the pre-processing requirements</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-summary-and-processing.html"><a href="data-summary-and-processing.html#summary-of-the-steps"><i class="fa fa-check"></i><b>2.2.2</b> Summary of the steps</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="visualisation.html"><a href="visualisation.html"><i class="fa fa-check"></i><b>3</b> Visualisation</a><ul>
<li class="chapter" data-level="3.1" data-path="visualisation.html"><a href="visualisation.html#summary-analysis-of-individual-variables"><i class="fa fa-check"></i><b>3.1</b> Summary analysis of individual variables</a><ul>
<li class="chapter" data-level="3.1.1" data-path="visualisation.html"><a href="visualisation.html#users"><i class="fa fa-check"></i><b>3.1.1</b> Users</a></li>
<li class="chapter" data-level="3.1.2" data-path="visualisation.html"><a href="visualisation.html#ratings"><i class="fa fa-check"></i><b>3.1.2</b> Ratings</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="visualisation.html"><a href="visualisation.html#intuitive-statements"><i class="fa fa-check"></i><b>3.2</b> Intuitive statements</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualisation.html"><a href="visualisation.html#statement-1"><i class="fa fa-check"></i><b>3.2.1</b> Statement 1</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualisation.html"><a href="visualisation.html#statement-2"><i class="fa fa-check"></i><b>3.2.2</b> Statement 2</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualisation.html"><a href="visualisation.html#statement-3"><i class="fa fa-check"></i><b>3.2.3</b> Statement 3</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualisation.html"><a href="visualisation.html#statement-4"><i class="fa fa-check"></i><b>3.2.4</b> Statement 4</a></li>
<li class="chapter" data-level="3.2.5" data-path="visualisation.html"><a href="visualisation.html#statement-5"><i class="fa fa-check"></i><b>3.2.5</b> Statement 5</a></li>
<li class="chapter" data-level="3.2.6" data-path="visualisation.html"><a href="visualisation.html#correlations"><i class="fa fa-check"></i><b>3.2.6</b> Correlations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="model.html"><a href="model.html"><i class="fa fa-check"></i><b>4</b> Model</a><ul>
<li class="chapter" data-level="4.1" data-path="model.html"><a href="model.html#linear-regression"><i class="fa fa-check"></i><b>4.1</b> Linear regression</a></li>
<li class="chapter" data-level="4.2" data-path="model.html"><a href="model.html#generalised-linear-regression"><i class="fa fa-check"></i><b>4.2</b> Generalised Linear regression</a></li>
<li class="chapter" data-level="4.3" data-path="model.html"><a href="model.html#lasso-regression"><i class="fa fa-check"></i><b>4.3</b> LASSO regression</a></li>
<li class="chapter" data-level="4.4" data-path="model.html"><a href="model.html#conclusion"><i class="fa fa-check"></i><b>4.4</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html"><i class="fa fa-check"></i><b>5</b> Stochastic Gradient Descent</a><ul>
<li class="chapter" data-level="5.1" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#latent-factor-model"><i class="fa fa-check"></i><b>5.1</b> Latent factor model</a></li>
<li class="chapter" data-level="5.2" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#formal-description"><i class="fa fa-check"></i><b>5.2</b> Formal description</a><ul>
<li class="chapter" data-level="5.2.1" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#low-rank-factorisation"><i class="fa fa-check"></i><b>5.2.1</b> Low-rank factorisation</a></li>
<li class="chapter" data-level="5.2.2" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#gradient-descent"><i class="fa fa-check"></i><b>5.2.2</b> Gradient Descent</a></li>
<li class="chapter" data-level="5.2.3" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#stochastic-gradient-descent-sgd"><i class="fa fa-check"></i><b>5.2.3</b> Stochastic Gradient Descent (SGD)</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="stochastic-gradient-descent.html"><a href="stochastic-gradient-descent.html#sgd-code-walk"><i class="fa fa-check"></i><b>5.3</b> SGD Code walk</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>6</b> Appendix</a><ul>
<li class="chapter" data-level="6.1" data-path="appendix.html"><a href="appendix.html#session-info"><i class="fa fa-check"></i><b>6.1</b> Session Info</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org/" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HarvardX - PH125.9x Data Science: Capstone - Movie Lens</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-summary-and-processing" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Data Summary and Processing</h1>
<p></p>
<p></p>
<p></p>
<p></p>
<p>Unless specified, this section only uses a portion (20%) of the dataset for performance reasons.</p>
<div id="description-of-the-dataset" class="section level2">
<h2><span class="header-section-number">2.1</span> Description of the dataset</h2>
<p>The data provided is a list of ratings made by anonymised users of a number of movies. The entire training dataset is a table of 9000055 rows and 6 variables. Note that the dataset is extermely sparse: if each user had rated each movie, the dataset should contain 54000330 ratings, i.e. 85 times more.</p>
<p>Each row represents a single rating made by a given user regarding a given movie.</p>
<p></p>
<p></p>
<p>The complete dataset includes 10677 unique movies, rated by 69878 unique users. No user rated the same movie twice.<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> Importantly, the dataset is fully and properly populated: no missing or abnormal value was found. However, a few movies were rated before the movie came out: the date of such ratings falls in the year before the one in brackets in the title. In such case, the date of first screening is brought to the date of the first rating.</p>
<p>The reduced data set includes 10225 unique movies, rated by 69750 unique
users. That is, very few users or movies are missed by restricting the dataset.</p>
<p>The dataset variables are:</p>
<p></p>

<p></p>
</div>
<div id="description-of-the-variables." class="section level2">
<h2><span class="header-section-number">2.2</span> Description of the variables.</h2>
<div id="intuitive-description-of-the-pre-processing-requirements" class="section level3">
<h3><span class="header-section-number">2.2.1</span> Intuitive description of the pre-processing requirements</h3>
<p>The dataset needs to be preprocessed to add more practical information. Some steps are necessary to make available information usable: this is the case for splitting the genres and extracting the year a movie came out. Other changes are driven by the following considerations.</p>
<p><em><em>All users are resource-constrained</em></em>. Watching a movie requires time and money, both of which are in limited supply. The act of taking the time to watch a movie, by itself, is an act of choice. The choice of which movie to watch results from a selection process that already biases a spectator towards movies he/she feels likely to enjoy. In other words, at least on an intuitive level, the pairs user/movie are not random: users did not select a movie randomly before rating it.</p>
<p>It is common knowledge that:</p>
<ul>
<li><p>A movie screened for the first time will sometimes be heavily marketed: the decision to watch this movie might be driven by hype rather than a reasoned choice; the choice to watch it is not a rational choice and will lead to possible disappointments.</p></li>
<li><p>In the medium term after first screening, movie availability could be relevant. Nowadays, internet gives access to a huge library of recent and not so recent movies. This was definitely not the case in the years at which ratings started to be collected (mid-nineties).</p></li>
<li><p>The decision to watch a movie that came out decades ago is a very deliberate process of choice. There is a <em>survival effect</em> in the sense that time sieved out bad movies. We could expect old movies, e.g. <em>Citizen Kane</em>, to be rated higher on average than recent ones.</p></li>
<li><p>In the short term, just a few weeks would make a difference on how a movie is perceived. But whether a movie is 50- or 55-year old would be of little impact. In other words, some sort of rescaling of time, logarithmic or other, need considering.</p></li>
<li><p>If a movie is very good, more people will watch it and rate it. In other words, we should see some correlation between ratings and numbers of ratings. Again, some sort of rescaling of time, logarithmic or other, need considering.</p></li>
</ul>
<p>Whether this additional information is actually useful will be analysed later in this report.</p>
<div id="changes-related-to-the-movies" class="section level4">
<h4><span class="header-section-number">2.2.1.1</span> Changes related to the movies:</h4>
<ul>
<li><p>Split the <code>genres</code> tags into separate logical variable, i.e. 1 variable per
individual genre. Each individual tags is a <code>-1</code> or <code>1</code> numerical value, with <code>1</code> indicating that a movie belongs to that genre. The reasons for using numerical values are:</p>
<ul>
<li>On a more intuitive level, movie are not all-or-nothing of a particular genre: a movie is not funny or not-funny; it could be a little bit funny or extremely funny. We could imagine a dataset where that movie would be a 20% or a 95% Comedy, or -50% anti-funny movie, possibly by extracting information from movies reviews.<br />
</li>
<li>We could also encode with 0,1 instead of -1,1. Modeling has shown to be more effective with the -1,1 encoding.</li>
<li>Key algorithms for recommender system involve dimension reduction which requires all variable to be numerical (no factors).</li>
</ul></li>
<li><p>Dimension reduction require variable scaling: for a given movie, all the ratings received by that movie are centered and scaled into a z-score. If a movie only received a single rating, the standard deviation is assumed to be 1 to avoid any missing value.</p></li>
<li><p>The date a movie came out is extracted from the title of the movie. The date is always a year, which we convert into January, 1st of that year (to avoid any rating being dated before).</p></li>
</ul>
</div>
<div id="changes-related-to-the-users" class="section level4">
<h4><span class="header-section-number">2.2.1.2</span> Changes related to the users:</h4>
<ul>
<li>As for the movies, for a given user, ratings given by a particular user are centered and scaled using the mean and standard deviation of all the ratings given by that particular user.</li>
</ul>
</div>
<div id="changes-related-to-the-dates" class="section level4">
<h4><span class="header-section-number">2.2.1.3</span> Changes related to the dates:</h4>
<ul>
<li><p>Timestamps cannot be readily understood. All dates (including the date a movie came out) are converted to number of <code>proper</code>Lubridate` date objects. Difference between dates are expressed in days.</p></li>
<li><p>As we will see, ratings for older movies tend to be higher. Time lapsed until a movie is rated seems of interest (later analysis will show to which extent). The dataset is completed by there time lapses: looking at the date of a particular rating, how many days have passed since:</p>
<ul>
<li>the movie came out;</li>
<li>the movie received its first rating;</li>
<li>the user gave its first rating.</li>
</ul></li>
<li><p>All dates are also in [logarithmic / square root scale].</p></li>
</ul>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
<p></p>
</div>
</div>
<div id="summary-of-the-steps" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Summary of the steps</h3>
<p>Once the pre-processing is carried out, the dataset variables are:</p>
<p></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource numberLines lineAnchors chunkout"><code class="sourceCode"><a class="sourceLine" id="cb1-1" href="#cb1-1" data-line-number="1">##  [1] &quot;userId&quot;               &quot;movieId&quot;              &quot;rating&quot;              </a>
<a class="sourceLine" id="cb1-2" href="#cb1-2" data-line-number="2">##  [4] &quot;title&quot;                &quot;date_rating&quot;          &quot;rating_z&quot;            </a>
<a class="sourceLine" id="cb1-3" href="#cb1-3" data-line-number="3">##  [7] &quot;movie_nRating&quot;        &quot;movie_nRating_log&quot;    &quot;movie_mean_rating&quot;   </a>
<a class="sourceLine" id="cb1-4" href="#cb1-4" data-line-number="4">## [10] &quot;movie_sd_rating&quot;      &quot;movie_first_rating&quot;   &quot;movie_z&quot;             </a>
<a class="sourceLine" id="cb1-5" href="#cb1-5" data-line-number="5">## [13] &quot;movie_year_out&quot;       &quot;movie_date_out&quot;       &quot;Action&quot;              </a>
<a class="sourceLine" id="cb1-6" href="#cb1-6" data-line-number="6">## [16] &quot;Adventure&quot;            &quot;Animation&quot;            &quot;Children&quot;            </a>
<a class="sourceLine" id="cb1-7" href="#cb1-7" data-line-number="7">## [19] &quot;Comedy&quot;               &quot;Crime&quot;                &quot;Documentary&quot;         </a>
<a class="sourceLine" id="cb1-8" href="#cb1-8" data-line-number="8">## [22] &quot;Drama&quot;                &quot;Fantasy&quot;              &quot;FilmNoir&quot;            </a>
<a class="sourceLine" id="cb1-9" href="#cb1-9" data-line-number="9">## [25] &quot;Horror&quot;               &quot;Musical&quot;              &quot;Mystery&quot;             </a>
<a class="sourceLine" id="cb1-10" href="#cb1-10" data-line-number="10">## [28] &quot;Romance&quot;              &quot;SciFi&quot;                &quot;Thriller&quot;            </a>
<a class="sourceLine" id="cb1-11" href="#cb1-11" data-line-number="11">## [31] &quot;War&quot;                  &quot;Western&quot;              &quot;user_nRating&quot;        </a>
<a class="sourceLine" id="cb1-12" href="#cb1-12" data-line-number="12">## [34] &quot;user_nRating_log&quot;     &quot;user_mean_rating&quot;     &quot;user_sd_rating&quot;      </a>
<a class="sourceLine" id="cb1-13" href="#cb1-13" data-line-number="13">## [37] &quot;user_first_rating&quot;    &quot;user_z&quot;               &quot;time_since_out&quot;      </a>
<a class="sourceLine" id="cb1-14" href="#cb1-14" data-line-number="14">## [40] &quot;time_since_out_log&quot;   &quot;time_movie_first&quot;     &quot;time_movie_first_log&quot;</a>
<a class="sourceLine" id="cb1-15" href="#cb1-15" data-line-number="15">## [43] &quot;time_user_first&quot;      &quot;time_user_first_log&quot;</a></code></pre></div>
<p></p>
<p></p>
<p></p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>See source code.<a href="data-summary-and-processing.html#fnref4" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="visualisation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Emmanuel-R8/HarvardX-Movielens/edit/master/2_Wrangling.rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": ["HarvardX - PH125.9x Data Science: Capstone - Movie Lens.pdf", "HarvardX - PH125.9x Data Science: Capstone - Movie Lens.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
